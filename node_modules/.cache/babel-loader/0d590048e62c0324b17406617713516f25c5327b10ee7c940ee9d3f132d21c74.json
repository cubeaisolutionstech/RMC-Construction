{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"E:\\\\construction-app\\\\src\\\\components\\\\inward\\\\PODetails.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport * as XLSX from \"xlsx\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PODetails = () => {\n  _s();\n  const [poDetails, setPODetails] = useState([]);\n\n  // CSV Data for three tables\n  const [poData, setPOData] = useState([]);\n  const [poHeaders, setPOHeaders] = useState([]);\n  const [grnData, setGRNData] = useState([]);\n  const [grnHeaders, setGRNHeaders] = useState([]);\n  const [indentData, setIndentData] = useState([]);\n  const [indentHeaders, setIndentHeaders] = useState([]);\n  const [showForm, setShowForm] = useState(false);\n  const [editingPO, setEditingPO] = useState(null);\n  const [uploadStatus, setUploadStatus] = useState(\"\");\n  const [isUploading, setIsUploading] = useState(false);\n  const [activeTab, setActiveTab] = useState(\"po\");\n\n  // Track which CSV files have data\n  const [availableTabs, setAvailableTabs] = useState({\n    po: false,\n    grn: false,\n    indent: false\n  });\n  const [formData, setFormData] = useState({\n    poNumber: \"\",\n    supplier: \"\",\n    material: \"\",\n    quantity: \"\",\n    rate: \"\",\n    deliveryDate: \"\",\n    narration: \"\",\n    status: \"Active\",\n    poType: \"\"\n  });\n  const [errors, setErrors] = useState({});\n  useEffect(() => {\n    fetchPODetails();\n    loadAllCSVData();\n  }, []);\n  const fetchPODetails = async () => {\n    try {\n      const res = await axios.get(\"http://localhost:5000/po\");\n      setPODetails(res.data);\n    } catch (error) {\n      console.error(\"Error fetching PO details:\", error);\n    }\n  };\n  const loadAllCSVData = async () => {\n    const results = await Promise.all([loadCSVData(\"po\", setPOData, setPOHeaders), loadCSVData(\"grn\", setGRNData, setGRNHeaders), loadCSVData(\"indent\", setIndentData, setIndentHeaders)]);\n\n    // Update available tabs based on which CSVs have data\n    const newAvailableTabs = {\n      po: results[0],\n      grn: results[1],\n      indent: results[2]\n    };\n    setAvailableTabs(newAvailableTabs);\n\n    // Set active tab to first available tab with data\n    const firstAvailableTab = Object.keys(newAvailableTabs).find(tab => newAvailableTabs[tab]);\n    if (firstAvailableTab && !newAvailableTabs[activeTab]) {\n      setActiveTab(firstAvailableTab);\n    }\n  };\n  const loadCSVData = async (type, setData, setHeaders) => {\n    try {\n      const response = await fetch(`http://localhost:8001/get-csv-data/${type}`);\n      const result = await response.json();\n      if (result.status === \"success\" && result.data.length > 0) {\n        setHeaders(result.headers || []);\n        setData(result.data || []);\n        return true; // Has data\n      } else {\n        setHeaders([]);\n        setData([]);\n        return false; // No data\n      }\n    } catch (error) {\n      console.log(`No ${type} data available yet`);\n      setHeaders([]);\n      setData([]);\n      return false;\n    }\n  };\n  const handleJsonUpload = async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    if (!file.name.endsWith(\".json\")) {\n      alert(\"Please select a JSON file\");\n      return;\n    }\n    setIsUploading(true);\n    setUploadStatus(\"Uploading and processing JSON file...\");\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    try {\n      const response = await fetch(\"http://localhost:8001/upload-json/\", {\n        method: \"POST\",\n        body: formData\n      });\n      const result = await response.json();\n      if (result.status === \"success\") {\n        setUploadStatus(\"✅ JSON processed successfully!\");\n\n        // Show processing details\n        if (result.details && result.details.length > 0) {\n          const details = result.details.map(d => `${d.voucher_type}: ${d.rows_added} rows added (Total: ${d.total_rows})`).join(\", \");\n          setUploadStatus(`✅ JSON processed: ${details}`);\n        }\n\n        // Reload all CSV data\n        await loadAllCSVData();\n        setTimeout(() => setUploadStatus(\"\"), 5000);\n      } else {\n        setUploadStatus(`❌ Error: ${result.error}`);\n        setTimeout(() => setUploadStatus(\"\"), 5000);\n      }\n    } catch (error) {\n      console.error(\"Upload error:\", error);\n      setUploadStatus(\"❌ Upload failed. Please check if the JSON converter server is running on port 8001.\");\n      setTimeout(() => setUploadStatus(\"\"), 5000);\n    } finally {\n      setIsUploading(false);\n      event.target.value = \"\";\n    }\n  };\n  const clearCSVData = async type => {\n    try {\n      const response = await fetch(`http://localhost:8001/clear-csv/${type}`, {\n        method: \"DELETE\"\n      });\n      const result = await response.json();\n      if (result.status === \"success\") {\n        setUploadStatus(`✅ ${type.toUpperCase()} data cleared`);\n\n        // Clear the specific data and update available tabs\n        if (type === \"po\") {\n          setPOData([]);\n          setPOHeaders([]);\n          setAvailableTabs(prev => ({\n            ...prev,\n            po: false\n          }));\n        } else if (type === \"grn\") {\n          setGRNData([]);\n          setGRNHeaders([]);\n          setAvailableTabs(prev => ({\n            ...prev,\n            grn: false\n          }));\n        } else if (type === \"indent\") {\n          setIndentData([]);\n          setIndentHeaders([]);\n          setAvailableTabs(prev => ({\n            ...prev,\n            indent: false\n          }));\n        }\n\n        // Switch to first available tab if current tab was cleared\n        const updatedTabs = {\n          ...availableTabs,\n          [type]: false\n        };\n        const firstAvailableTab = Object.keys(updatedTabs).find(tab => updatedTabs[tab]);\n        if (activeTab === type && firstAvailableTab) {\n          setActiveTab(firstAvailableTab);\n        }\n        setTimeout(() => setUploadStatus(\"\"), 2000);\n      }\n    } catch (error) {\n      console.error(\"Error clearing data:\", error);\n    }\n  };\n  const downloadCSV = type => {\n    window.open(`http://localhost:8001/download/${type}`, \"_blank\");\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const formErrors = validateForm();\n    if (Object.keys(formErrors).length > 0) {\n      setErrors(formErrors);\n      return;\n    }\n    const payload = {\n      ...formData,\n      quantity: Number.parseFloat(formData.quantity),\n      rate: Number.parseFloat(formData.rate),\n      totalAmount: Number.parseFloat(formData.quantity) * Number.parseFloat(formData.rate)\n    };\n    try {\n      if (editingPO) {\n        await axios.put(`http://localhost:5000/po/${editingPO.id}`, payload);\n      } else {\n        await axios.post(\"http://localhost:5000/po\", payload);\n      }\n      fetchPODetails();\n      resetForm();\n    } catch (error) {\n      console.error(\"Error saving PO:\", error);\n      alert(\"Error saving PO. Please try again.\");\n    }\n  };\n  const handleDelete = async id => {\n    if (window.confirm(\"Delete this PO?\")) {\n      try {\n        await axios.delete(`http://localhost:5000/po/${id}`);\n        fetchPODetails();\n      } catch (error) {\n        console.error(\"Error deleting PO:\", error);\n        alert(\"Error deleting PO. Please try again.\");\n      }\n    }\n  };\n  const handleEdit = po => {\n    setFormData(po);\n    setEditingPO(po);\n    setShowForm(true);\n  };\n  const resetForm = () => {\n    setFormData({\n      poNumber: \"\",\n      supplier: \"\",\n      material: \"\",\n      quantity: \"\",\n      rate: \"\",\n      deliveryDate: \"\",\n      narration: \"\",\n      status: \"Active\",\n      poType: \"\"\n    });\n    setErrors({});\n    setEditingPO(null);\n    setShowForm(false);\n  };\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.poNumber) newErrors.poNumber = \"Required\";\n    if (!formData.supplier) newErrors.supplier = \"Required\";\n    if (!formData.material) newErrors.material = \"Required\";\n    if (!formData.quantity || formData.quantity <= 0) newErrors.quantity = \"Invalid\";\n    if (!formData.rate || formData.rate <= 0) newErrors.rate = \"Invalid\";\n    if (!formData.deliveryDate) newErrors.deliveryDate = \"Required\";\n    if (!formData.poType) newErrors.poType = \"Required\";\n    return newErrors;\n  };\n  const exportToExcel = () => {\n    const ws = XLSX.utils.json_to_sheet(poDetails);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, \"PO\");\n    XLSX.writeFile(wb, \"po_details.xlsx\");\n  };\n  const renderCSVTable = (data, headers, type) => {\n    if (data.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD83D\\uDCCA No \", type.toUpperCase(), \" data available.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Upload a JSON file to see \", type, \" vouchers here.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxHeight: \"400px\",\n        overflowY: \"auto\",\n        overflowX: \"auto\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"po-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"S.No\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this), headers.map((header, index) => /*#__PURE__*/_jsxDEV(\"th\", {\n              children: header\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: data.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: rowIndex + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 17\n            }, this), row.map((cell, cellIndex) => /*#__PURE__*/_jsxDEV(\"td\", {\n              children: cell || \"\"\n            }, cellIndex, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 19\n            }, this))]\n          }, rowIndex, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Check if any CSV data is available\n  const hasAnyCSVData = Object.values(availableTabs).some(hasData => hasData);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"po-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"po-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Purchase Order Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn export\",\n          onClick: exportToExcel,\n          children: \"Export Excel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn add\",\n          onClick: () => setShowForm(true),\n          children: \"Add PO\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"po-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"S.No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"PO Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Supplier\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Material\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Qty\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Rate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Delivery\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: poDetails.map((po, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: i + 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: po.poNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: po.supplier\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: po.material\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: po.quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [\"\\u20B9\", po.rate]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [\"\\u20B9\", po.totalAmount]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: new Date(po.deliveryDate).toLocaleDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: po.poType\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: po.status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn edit\",\n              onClick: () => handleEdit(po),\n              children: \"\\u270F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn delete\",\n              onClick: () => handleDelete(po.id),\n              children: \"\\uD83D\\uDDD1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 15\n          }, this)]\n        }, po.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"csv-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"po-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"JSON Voucher Processor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \".json\",\n            onChange: handleJsonUpload,\n            style: {\n              display: \"none\"\n            },\n            id: \"json-upload\",\n            disabled: isUploading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"json-upload\",\n            className: `btn add ${isUploading ? \"disabled\" : \"\"}`,\n            children: isUploading ? \"Processing...\" : \"📁 Upload JSON\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this), uploadStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `upload-status ${uploadStatus.includes(\"❌\") ? \"error\" : \"success\"}`,\n        children: uploadStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 11\n      }, this), hasAnyCSVData && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tab-navigation\",\n          children: [availableTabs.po && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `tab-btn ${activeTab === \"po\" ? \"active\" : \"\"}`,\n            onClick: () => setActiveTab(\"po\"),\n            children: [\"Purchase Orders (\", poData.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 17\n          }, this), availableTabs.grn && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `tab-btn ${activeTab === \"grn\" ? \"active\" : \"\"}`,\n            onClick: () => setActiveTab(\"grn\"),\n            children: [\"GRN (\", grnData.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 17\n          }, this), availableTabs.indent && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `tab-btn ${activeTab === \"indent\" ? \"active\" : \"\"}`,\n            onClick: () => setActiveTab(\"indent\"),\n            children: [\"Indent (\", indentData.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tab-content\",\n          children: [activeTab === \"po\" && availableTabs.po && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Purchase Order Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn export\",\n                  onClick: () => downloadCSV(\"po\"),\n                  children: \"\\uD83D\\uDCE5 Download CSV\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn delete\",\n                  onClick: () => clearCSVData(\"po\"),\n                  children: \"Clear Data\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 437,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 19\n            }, this), renderCSVTable(poData, poHeaders, \"purchase order\")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 17\n          }, this), activeTab === \"grn\" && availableTabs.grn && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"GRN Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn export\",\n                  onClick: () => downloadCSV(\"grn\"),\n                  children: \"\\uD83D\\uDCE5 Download CSV\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn delete\",\n                  onClick: () => clearCSVData(\"grn\"),\n                  children: \"Clear Data\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 450,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 19\n            }, this), renderCSVTable(grnData, grnHeaders, \"grn\")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 17\n          }, this), activeTab === \"indent\" && availableTabs.indent && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Indent Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 466,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn export\",\n                  onClick: () => downloadCSV(\"indent\"),\n                  children: \"\\uD83D\\uDCE5 Download CSV\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 468,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn delete\",\n                  onClick: () => clearCSVData(\"indent\"),\n                  children: \"Clear Data\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 19\n            }, this), renderCSVTable(indentData, indentHeaders, \"indent\")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), !hasAnyCSVData && !isUploading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-csv-data\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-data\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uD83D\\uDCCA No CSV data available.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Upload a JSON file containing vouchers to see data organized in tables.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Supported voucher types:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 17\n            }, this), \" Purchase Order, GRN, Indent\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 7\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: editingPO ? \"Edit PO\" : \"Add PO\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"po-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"PO Number\",\n            value: formData.poNumber,\n            onChange: e => setFormData({\n              ...formData,\n              poNumber: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Supplier\",\n            value: formData.supplier,\n            onChange: e => setFormData({\n              ...formData,\n              supplier: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Material\",\n            value: formData.material,\n            onChange: e => setFormData({\n              ...formData,\n              material: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"Quantity\",\n            value: formData.quantity,\n            onChange: e => setFormData({\n              ...formData,\n              quantity: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"Rate\",\n            value: formData.rate,\n            onChange: e => setFormData({\n              ...formData,\n              rate: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: formData.deliveryDate,\n            onChange: e => setFormData({\n              ...formData,\n              deliveryDate: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            placeholder: \"Narration\",\n            value: formData.narration,\n            onChange: e => setFormData({\n              ...formData,\n              narration: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 534,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: formData.poType,\n            onChange: e => setFormData({\n              ...formData,\n              poType: e.target.value\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select PO Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Local\",\n              children: \"Local\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Import\",\n              children: \"Import\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: formData.status,\n            onChange: e => setFormData({\n              ...formData,\n              status: e.target.value\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Active\",\n              children: \"Active\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Completed\",\n              children: \"Completed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Cancelled\",\n              children: \"Cancelled\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Pending\",\n              children: \"Pending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn cancel\",\n              onClick: resetForm,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn save\",\n              children: \"Save PO\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 557,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        .csv-section {\n          border-top: 2px solid #eee;\n          padding-top: 20px;\n          margin-top: 40px;\n        }\n        \n        .upload-status {\n          padding: 10px;\n          border-radius: 4px;\n          margin: 10px 0;\n          font-weight: 500;\n        }\n        \n        .upload-status.success {\n          background-color: #d4edda;\n          color: #155724;\n          border: 1px solid #c3e6cb;\n        }\n        \n        .upload-status.error {\n          background-color: #f8d7da;\n          color: #721c24;\n          border: 1px solid #f5c6cb;\n        }\n        \n        .btn.disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n        \n        .tab-navigation {\n          display: flex;\n          border-bottom: 2px solid #eee;\n          margin: 20px 0;\n          flex-wrap: wrap;\n        }\n        \n        .tab-btn {\n          padding: 10px 20px;\n          border: none;\n          background: #f8f9fa;\n          cursor: pointer;\n          border-bottom: 3px solid transparent;\n          margin-right: 5px;\n          margin-bottom: 5px;\n          font-weight: 500;\n          border-radius: 4px 4px 0 0;\n        }\n        \n        .tab-btn.active {\n          background: white;\n          border-bottom-color: #007bff;\n          color: #007bff;\n        }\n        \n        .tab-btn:hover {\n          background: #e9ecef;\n        }\n        \n        .table-section {\n          margin-top: 20px;\n        }\n        \n        .table-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          flex-wrap: wrap;\n          gap: 10px;\n        }\n        \n        .table-header h4 {\n          margin: 0;\n          color: #333;\n        }\n        \n        .table-header div {\n          display: flex;\n          gap: 10px;\n          flex-wrap: wrap;\n        }\n        \n        .no-data {\n          text-align: center;\n          padding: 40px;\n          background: #f8f9fa;\n          border-radius: 8px;\n          border: 2px dashed #dee2e6;\n          color: #666;\n        }\n        \n        .no-data p {\n          margin: 10px 0;\n        }\n        \n        .no-csv-data {\n          margin-top: 20px;\n        }\n        \n        @media (max-width: 768px) {\n          .table-header {\n            flex-direction: column;\n            align-items: flex-start;\n          }\n          \n          .tab-navigation {\n            flex-direction: column;\n          }\n          \n          .tab-btn {\n            margin-right: 0;\n            margin-bottom: 5px;\n          }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 320,\n    columnNumber: 5\n  }, this);\n};\n_s(PODetails, \"2FS+ENKa3wOQbO6Uje26z1s51DU=\");\n_c = PODetails;\nexport default PODetails;\nvar _c;\n$RefreshReg$(_c, \"PODetails\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","axios","XLSX","jsxDEV","_jsxDEV","Fragment","_Fragment","PODetails","poDetails","setPODetails","poData","setPOData","poHeaders","setPOHeaders","grnData","setGRNData","grnHeaders","setGRNHeaders","indentData","setIndentData","indentHeaders","setIndentHeaders","showForm","setShowForm","editingPO","setEditingPO","uploadStatus","setUploadStatus","isUploading","setIsUploading","activeTab","setActiveTab","availableTabs","setAvailableTabs","po","grn","indent","formData","setFormData","poNumber","supplier","material","quantity","rate","deliveryDate","narration","status","poType","errors","setErrors","fetchPODetails","loadAllCSVData","res","get","data","error","console","results","Promise","all","loadCSVData","newAvailableTabs","firstAvailableTab","Object","keys","find","tab","type","setData","setHeaders","response","fetch","result","json","length","headers","log","handleJsonUpload","event","file","target","files","name","endsWith","alert","FormData","append","method","body","details","map","d","voucher_type","rows_added","total_rows","join","setTimeout","value","clearCSVData","toUpperCase","prev","updatedTabs","downloadCSV","window","open","handleSubmit","e","preventDefault","formErrors","validateForm","payload","Number","parseFloat","totalAmount","put","id","post","resetForm","handleDelete","confirm","delete","handleEdit","newErrors","exportToExcel","ws","utils","json_to_sheet","wb","book_new","book_append_sheet","writeFile","renderCSVTable","className","children","fileName","lineNumber","columnNumber","style","maxHeight","overflowY","overflowX","header","index","row","rowIndex","cell","cellIndex","hasAnyCSVData","values","some","hasData","onClick","i","Date","toLocaleDateString","accept","onChange","display","disabled","htmlFor","includes","onSubmit","placeholder","jsx","_c","$RefreshReg$"],"sources":["E:/construction-app/src/components/inward/PODetails.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport axios from \"axios\"\nimport  * as XLSX from \"xlsx\"\n\nconst PODetails = () => {\n  const [poDetails, setPODetails] = useState([])\n\n  // CSV Data for three tables\n  const [poData, setPOData] = useState([])\n  const [poHeaders, setPOHeaders] = useState([])\n  const [grnData, setGRNData] = useState([])\n  const [grnHeaders, setGRNHeaders] = useState([])\n  const [indentData, setIndentData] = useState([])\n  const [indentHeaders, setIndentHeaders] = useState([])\n\n  const [showForm, setShowForm] = useState(false)\n  const [editingPO, setEditingPO] = useState(null)\n  const [uploadStatus, setUploadStatus] = useState(\"\")\n  const [isUploading, setIsUploading] = useState(false)\n  const [activeTab, setActiveTab] = useState(\"po\")\n\n  // Track which CSV files have data\n  const [availableTabs, setAvailableTabs] = useState({\n    po: false,\n    grn: false,\n    indent: false,\n  })\n\n  const [formData, setFormData] = useState({\n    poNumber: \"\",\n    supplier: \"\",\n    material: \"\",\n    quantity: \"\",\n    rate: \"\",\n    deliveryDate: \"\",\n    narration: \"\",\n    status: \"Active\",\n    poType: \"\",\n  })\n  const [errors, setErrors] = useState({})\n\n  useEffect(() => {\n    fetchPODetails()\n    loadAllCSVData()\n  }, [])\n\n  const fetchPODetails = async () => {\n    try {\n      const res = await axios.get(\"http://localhost:5000/po\")\n      setPODetails(res.data)\n    } catch (error) {\n      console.error(\"Error fetching PO details:\", error)\n    }\n  }\n\n  const loadAllCSVData = async () => {\n    const results = await Promise.all([\n      loadCSVData(\"po\", setPOData, setPOHeaders),\n      loadCSVData(\"grn\", setGRNData, setGRNHeaders),\n      loadCSVData(\"indent\", setIndentData, setIndentHeaders),\n    ])\n\n    // Update available tabs based on which CSVs have data\n    const newAvailableTabs = {\n      po: results[0],\n      grn: results[1],\n      indent: results[2],\n    }\n    setAvailableTabs(newAvailableTabs)\n\n    // Set active tab to first available tab with data\n    const firstAvailableTab = Object.keys(newAvailableTabs).find((tab) => newAvailableTabs[tab])\n    if (firstAvailableTab && !newAvailableTabs[activeTab]) {\n      setActiveTab(firstAvailableTab)\n    }\n  }\n\n  const loadCSVData = async (type, setData, setHeaders) => {\n    try {\n      const response = await fetch(`http://localhost:8001/get-csv-data/${type}`)\n      const result = await response.json()\n      if (result.status === \"success\" && result.data.length > 0) {\n        setHeaders(result.headers || [])\n        setData(result.data || [])\n        return true // Has data\n      } else {\n        setHeaders([])\n        setData([])\n        return false // No data\n      }\n    } catch (error) {\n      console.log(`No ${type} data available yet`)\n      setHeaders([])\n      setData([])\n      return false\n    }\n  }\n\n  const handleJsonUpload = async (event) => {\n    const file = event.target.files[0]\n    if (!file) return\n\n    if (!file.name.endsWith(\".json\")) {\n      alert(\"Please select a JSON file\")\n      return\n    }\n\n    setIsUploading(true)\n    setUploadStatus(\"Uploading and processing JSON file...\")\n\n    const formData = new FormData()\n    formData.append(\"file\", file)\n\n    try {\n      const response = await fetch(\"http://localhost:8001/upload-json/\", {\n        method: \"POST\",\n        body: formData,\n      })\n\n      const result = await response.json()\n\n      if (result.status === \"success\") {\n        setUploadStatus(\"✅ JSON processed successfully!\")\n\n        // Show processing details\n        if (result.details && result.details.length > 0) {\n          const details = result.details\n            .map((d) => `${d.voucher_type}: ${d.rows_added} rows added (Total: ${d.total_rows})`)\n            .join(\", \")\n          setUploadStatus(`✅ JSON processed: ${details}`)\n        }\n\n        // Reload all CSV data\n        await loadAllCSVData()\n\n        setTimeout(() => setUploadStatus(\"\"), 5000)\n      } else {\n        setUploadStatus(`❌ Error: ${result.error}`)\n        setTimeout(() => setUploadStatus(\"\"), 5000)\n      }\n    } catch (error) {\n      console.error(\"Upload error:\", error)\n      setUploadStatus(\"❌ Upload failed. Please check if the JSON converter server is running on port 8001.\")\n      setTimeout(() => setUploadStatus(\"\"), 5000)\n    } finally {\n      setIsUploading(false)\n      event.target.value = \"\"\n    }\n  }\n\n  const clearCSVData = async (type) => {\n    try {\n      const response = await fetch(`http://localhost:8001/clear-csv/${type}`, {\n        method: \"DELETE\",\n      })\n      const result = await response.json()\n\n      if (result.status === \"success\") {\n        setUploadStatus(`✅ ${type.toUpperCase()} data cleared`)\n\n        // Clear the specific data and update available tabs\n        if (type === \"po\") {\n          setPOData([])\n          setPOHeaders([])\n          setAvailableTabs((prev) => ({ ...prev, po: false }))\n        } else if (type === \"grn\") {\n          setGRNData([])\n          setGRNHeaders([])\n          setAvailableTabs((prev) => ({ ...prev, grn: false }))\n        } else if (type === \"indent\") {\n          setIndentData([])\n          setIndentHeaders([])\n          setAvailableTabs((prev) => ({ ...prev, indent: false }))\n        }\n\n        // Switch to first available tab if current tab was cleared\n        const updatedTabs = { ...availableTabs, [type]: false }\n        const firstAvailableTab = Object.keys(updatedTabs).find((tab) => updatedTabs[tab])\n        if (activeTab === type && firstAvailableTab) {\n          setActiveTab(firstAvailableTab)\n        }\n\n        setTimeout(() => setUploadStatus(\"\"), 2000)\n      }\n    } catch (error) {\n      console.error(\"Error clearing data:\", error)\n    }\n  }\n\n  const downloadCSV = (type) => {\n    window.open(`http://localhost:8001/download/${type}`, \"_blank\")\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    const formErrors = validateForm()\n    if (Object.keys(formErrors).length > 0) {\n      setErrors(formErrors)\n      return\n    }\n\n    const payload = {\n      ...formData,\n      quantity: Number.parseFloat(formData.quantity),\n      rate: Number.parseFloat(formData.rate),\n      totalAmount: Number.parseFloat(formData.quantity) * Number.parseFloat(formData.rate),\n    }\n\n    try {\n      if (editingPO) {\n        await axios.put(`http://localhost:5000/po/${editingPO.id}`, payload)\n      } else {\n        await axios.post(\"http://localhost:5000/po\", payload)\n      }\n\n      fetchPODetails()\n      resetForm()\n    } catch (error) {\n      console.error(\"Error saving PO:\", error)\n      alert(\"Error saving PO. Please try again.\")\n    }\n  }\n\n  const handleDelete = async (id) => {\n    if (window.confirm(\"Delete this PO?\")) {\n      try {\n        await axios.delete(`http://localhost:5000/po/${id}`)\n        fetchPODetails()\n      } catch (error) {\n        console.error(\"Error deleting PO:\", error)\n        alert(\"Error deleting PO. Please try again.\")\n      }\n    }\n  }\n\n  const handleEdit = (po) => {\n    setFormData(po)\n    setEditingPO(po)\n    setShowForm(true)\n  }\n\n  const resetForm = () => {\n    setFormData({\n      poNumber: \"\",\n      supplier: \"\",\n      material: \"\",\n      quantity: \"\",\n      rate: \"\",\n      deliveryDate: \"\",\n      narration: \"\",\n      status: \"Active\",\n      poType: \"\",\n    })\n    setErrors({})\n    setEditingPO(null)\n    setShowForm(false)\n  }\n\n  const validateForm = () => {\n    const newErrors = {}\n    if (!formData.poNumber) newErrors.poNumber = \"Required\"\n    if (!formData.supplier) newErrors.supplier = \"Required\"\n    if (!formData.material) newErrors.material = \"Required\"\n    if (!formData.quantity || formData.quantity <= 0) newErrors.quantity = \"Invalid\"\n    if (!formData.rate || formData.rate <= 0) newErrors.rate = \"Invalid\"\n    if (!formData.deliveryDate) newErrors.deliveryDate = \"Required\"\n    if (!formData.poType) newErrors.poType = \"Required\"\n    return newErrors\n  }\n\n  const exportToExcel = () => {\n    const ws = XLSX.utils.json_to_sheet(poDetails)\n    const wb = XLSX.utils.book_new()\n    XLSX.utils.book_append_sheet(wb, ws, \"PO\")\n    XLSX.writeFile(wb, \"po_details.xlsx\")\n  }\n\n  const renderCSVTable = (data, headers, type) => {\n    if (data.length === 0) {\n      return (\n        <div className=\"no-data\">\n          <p>📊 No {type.toUpperCase()} data available.</p>\n          <p>Upload a JSON file to see {type} vouchers here.</p>\n        </div>\n      )\n    }\n\n    return (\n      <div style={{ maxHeight: \"400px\", overflowY: \"auto\", overflowX: \"auto\" }}>\n        <table className=\"po-table\">\n          <thead>\n            <tr>\n              <th>S.No</th>\n              {headers.map((header, index) => (\n                <th key={index}>{header}</th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {data.map((row, rowIndex) => (\n              <tr key={rowIndex}>\n                <td>{rowIndex + 1}</td>\n                {row.map((cell, cellIndex) => (\n                  <td key={cellIndex}>{cell || \"\"}</td>\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    )\n  }\n\n  // Check if any CSV data is available\n  const hasAnyCSVData = Object.values(availableTabs).some((hasData) => hasData)\n\n  return (\n    <div className=\"po-wrapper\">\n      <div className=\"po-header\">\n        <h2>Purchase Order Management</h2>\n        <div>\n          <button className=\"btn export\" onClick={exportToExcel}>\n            Export Excel\n          </button>\n          <button className=\"btn add\" onClick={() => setShowForm(true)}>\n            Add PO\n          </button>\n        </div>\n      </div>\n\n      {/* Original PO Details Table */}\n      <table className=\"po-table\">\n        <thead>\n          <tr>\n            <th>S.No</th>\n            <th>PO Number</th>\n            <th>Supplier</th>\n            <th>Material</th>\n            <th>Qty</th>\n            <th>Rate</th>\n            <th>Amount</th>\n            <th>Delivery</th>\n            <th>Type</th>\n            <th>Status</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {poDetails.map((po, i) => (\n            <tr key={po.id}>\n              <td>{i + 1}</td>\n              <td>{po.poNumber}</td>\n              <td>{po.supplier}</td>\n              <td>{po.material}</td>\n              <td>{po.quantity}</td>\n              <td>₹{po.rate}</td>\n              <td>₹{po.totalAmount}</td>\n              <td>{new Date(po.deliveryDate).toLocaleDateString()}</td>\n              <td>{po.poType}</td>\n              <td>{po.status}</td>\n              <td>\n                <button className=\"btn edit\" onClick={() => handleEdit(po)}>\n                  ✏\n                </button>\n                <button className=\"btn delete\" onClick={() => handleDelete(po.id)}>\n                  🗑\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      {/* JSON to CSV Conversion Section */}\n      <div className=\"csv-section\">\n        <div className=\"po-header\">\n          <h3>JSON Voucher Processor</h3>\n          <div>\n            <input\n              type=\"file\"\n              accept=\".json\"\n              onChange={handleJsonUpload}\n              style={{ display: \"none\" }}\n              id=\"json-upload\"\n              disabled={isUploading}\n            />\n            <label htmlFor=\"json-upload\" className={`btn add ${isUploading ? \"disabled\" : \"\"}`}>\n              {isUploading ? \"Processing...\" : \"📁 Upload JSON\"}\n            </label>\n          </div>\n        </div>\n\n        {uploadStatus && (\n          <div className={`upload-status ${uploadStatus.includes(\"❌\") ? \"error\" : \"success\"}`}>{uploadStatus}</div>\n        )}\n\n        {/* Show tabs only if there's CSV data available */}\n        {hasAnyCSVData && (\n          <>\n            {/* Tab Navigation - Only show tabs that have data */}\n            <div className=\"tab-navigation\">\n              {availableTabs.po && (\n                <button className={`tab-btn ${activeTab === \"po\" ? \"active\" : \"\"}`} onClick={() => setActiveTab(\"po\")}>\n                  Purchase Orders ({poData.length})\n                </button>\n              )}\n              {availableTabs.grn && (\n                <button\n                  className={`tab-btn ${activeTab === \"grn\" ? \"active\" : \"\"}`}\n                  onClick={() => setActiveTab(\"grn\")}\n                >\n                  GRN ({grnData.length})\n                </button>\n              )}\n              {availableTabs.indent && (\n                <button\n                  className={`tab-btn ${activeTab === \"indent\" ? \"active\" : \"\"}`}\n                  onClick={() => setActiveTab(\"indent\")}\n                >\n                  Indent ({indentData.length})\n                </button>\n              )}\n            </div>\n\n            {/* Tab Content */}\n            <div className=\"tab-content\">\n              {activeTab === \"po\" && availableTabs.po && (\n                <div className=\"table-section\">\n                  <div className=\"table-header\">\n                    <h4>Purchase Order Details</h4>\n                    <div>\n                      <button className=\"btn export\" onClick={() => downloadCSV(\"po\")}>\n                        📥 Download CSV\n                      </button>\n                      <button className=\"btn delete\" onClick={() => clearCSVData(\"po\")}>\n                        Clear Data\n                      </button>\n                    </div>\n                  </div>\n                  {renderCSVTable(poData, poHeaders, \"purchase order\")}\n                </div>\n              )}\n\n              {activeTab === \"grn\" && availableTabs.grn && (\n                <div className=\"table-section\">\n                  <div className=\"table-header\">\n                    <h4>GRN Details</h4>\n                    <div>\n                      <button className=\"btn export\" onClick={() => downloadCSV(\"grn\")}>\n                        📥 Download CSV\n                      </button>\n                      <button className=\"btn delete\" onClick={() => clearCSVData(\"grn\")}>\n                        Clear Data\n                      </button>\n                    </div>\n                  </div>\n                  {renderCSVTable(grnData, grnHeaders, \"grn\")}\n                </div>\n              )}\n\n              {activeTab === \"indent\" && availableTabs.indent && (\n                <div className=\"table-section\">\n                  <div className=\"table-header\">\n                    <h4>Indent Details</h4>\n                    <div>\n                      <button className=\"btn export\" onClick={() => downloadCSV(\"indent\")}>\n                        📥 Download CSV\n                      </button>\n                      <button className=\"btn delete\" onClick={() => clearCSVData(\"indent\")}>\n                        Clear Data\n                      </button>\n                    </div>\n                  </div>\n                  {renderCSVTable(indentData, indentHeaders, \"indent\")}\n                </div>\n              )}\n            </div>\n          </>\n        )}\n\n        {/* Show message when no CSV data is available */}\n        {!hasAnyCSVData && !isUploading && (\n          <div className=\"no-csv-data\">\n            <div className=\"no-data\">\n              <p>📊 No CSV data available.</p>\n              <p>Upload a JSON file containing vouchers to see data organized in tables.</p>\n              <p>\n                <strong>Supported voucher types:</strong> Purchase Order, GRN, Indent\n              </p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {showForm && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal\">\n            <h3>{editingPO ? \"Edit PO\" : \"Add PO\"}</h3>\n            <form onSubmit={handleSubmit} className=\"po-form\">\n              <input\n                placeholder=\"PO Number\"\n                value={formData.poNumber}\n                onChange={(e) => setFormData({ ...formData, poNumber: e.target.value })}\n              />\n              <input\n                placeholder=\"Supplier\"\n                value={formData.supplier}\n                onChange={(e) => setFormData({ ...formData, supplier: e.target.value })}\n              />\n              <input\n                placeholder=\"Material\"\n                value={formData.material}\n                onChange={(e) => setFormData({ ...formData, material: e.target.value })}\n              />\n              <input\n                type=\"number\"\n                placeholder=\"Quantity\"\n                value={formData.quantity}\n                onChange={(e) => setFormData({ ...formData, quantity: e.target.value })}\n              />\n              <input\n                type=\"number\"\n                placeholder=\"Rate\"\n                value={formData.rate}\n                onChange={(e) => setFormData({ ...formData, rate: e.target.value })}\n              />\n              <input\n                type=\"date\"\n                value={formData.deliveryDate}\n                onChange={(e) => setFormData({ ...formData, deliveryDate: e.target.value })}\n              />\n              <textarea\n                placeholder=\"Narration\"\n                value={formData.narration}\n                onChange={(e) => setFormData({ ...formData, narration: e.target.value })}\n              />\n\n              <select value={formData.poType} onChange={(e) => setFormData({ ...formData, poType: e.target.value })}>\n                <option value=\"\">Select PO Type</option>\n                <option value=\"Local\">Local</option>\n                <option value=\"Import\">Import</option>\n              </select>\n\n              <select value={formData.status} onChange={(e) => setFormData({ ...formData, status: e.target.value })}>\n                <option value=\"Active\">Active</option>\n                <option value=\"Completed\">Completed</option>\n                <option value=\"Cancelled\">Cancelled</option>\n                <option value=\"Pending\">Pending</option>\n              </select>\n\n              <div className=\"form-buttons\">\n                <button type=\"button\" className=\"btn cancel\" onClick={resetForm}>\n                  Cancel\n                </button>\n                <button type=\"submit\" className=\"btn save\">\n                  Save PO\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      <style jsx>{`\n        .csv-section {\n          border-top: 2px solid #eee;\n          padding-top: 20px;\n          margin-top: 40px;\n        }\n        \n        .upload-status {\n          padding: 10px;\n          border-radius: 4px;\n          margin: 10px 0;\n          font-weight: 500;\n        }\n        \n        .upload-status.success {\n          background-color: #d4edda;\n          color: #155724;\n          border: 1px solid #c3e6cb;\n        }\n        \n        .upload-status.error {\n          background-color: #f8d7da;\n          color: #721c24;\n          border: 1px solid #f5c6cb;\n        }\n        \n        .btn.disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n        \n        .tab-navigation {\n          display: flex;\n          border-bottom: 2px solid #eee;\n          margin: 20px 0;\n          flex-wrap: wrap;\n        }\n        \n        .tab-btn {\n          padding: 10px 20px;\n          border: none;\n          background: #f8f9fa;\n          cursor: pointer;\n          border-bottom: 3px solid transparent;\n          margin-right: 5px;\n          margin-bottom: 5px;\n          font-weight: 500;\n          border-radius: 4px 4px 0 0;\n        }\n        \n        .tab-btn.active {\n          background: white;\n          border-bottom-color: #007bff;\n          color: #007bff;\n        }\n        \n        .tab-btn:hover {\n          background: #e9ecef;\n        }\n        \n        .table-section {\n          margin-top: 20px;\n        }\n        \n        .table-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 15px;\n          flex-wrap: wrap;\n          gap: 10px;\n        }\n        \n        .table-header h4 {\n          margin: 0;\n          color: #333;\n        }\n        \n        .table-header div {\n          display: flex;\n          gap: 10px;\n          flex-wrap: wrap;\n        }\n        \n        .no-data {\n          text-align: center;\n          padding: 40px;\n          background: #f8f9fa;\n          border-radius: 8px;\n          border: 2px dashed #dee2e6;\n          color: #666;\n        }\n        \n        .no-data p {\n          margin: 10px 0;\n        }\n        \n        .no-csv-data {\n          margin-top: 20px;\n        }\n        \n        @media (max-width: 768px) {\n          .table-header {\n            flex-direction: column;\n            align-items: flex-start;\n          }\n          \n          .tab-navigation {\n            flex-direction: column;\n          }\n          \n          .tab-btn {\n            margin-right: 0;\n            margin-bottom: 5px;\n          }\n        }\n      `}</style>\n    </div>\n  )\n}\n\nexport default PODetails\n"],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAAO;MAAAC,QAAA,EAAA1I,YAAA;MAAA2I,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAF,QAAA,EAAA1I,YAAA;IAAA2I,UAAA;IAAAC,YAAA;EAAA,OACP,CAAC;AAEV,CAAC;AAAA3I,EAAA,CAtqBKU,SAAS;AAAA6J,EAAA,GAAT7J,SAAS;AAwqBf,eAAeA,SAAS;AAAA,IAAA6J,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}